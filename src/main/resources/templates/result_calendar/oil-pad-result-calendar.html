<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{blocks/template.html}">
<th:block layout:fragment="alert-content">
    <hr class="my-4">
    <div class="card">
        <div class="card-body">
            <h3 class="text-center">КАЛЕНДАРНЫЕ СРОКИ ПРОЕКТА</h3>
            <h5 class="fst-italic">Шифр договора: [[${codeContract}]]</h5>
            <h5 class="fst-italic lh-1" style="margin-bottom: 20px;">Основные характеристики проекта</h5>
            <p class="fst-italic lh-1" th:if="${fieldEngineeringSurvey}">Полевые инженерные изыскания: Да</p>
            <p class="fst-italic lh-1" th:if="${!fieldEngineeringSurvey}">Полевые инженерные изыскания: Нет</p>
            <p class="fst-italic lh-1" th:if="${fieldEngineeringSurvey}">К полевым ИИ привлечена
                [[${dataFormOilPad.geodeticTeamType.title}]] размера геодезическая бригада</p>
            <p class="fst-italic lh-1" th:if="${fieldEngineeringSurvey}">Количество геодезических бригад:
                [[${dataFormOilPad.geodeticTeam}]]</p>
            <p class="fst-italic lh-1" th:if="${fieldEngineeringSurvey}">Количество геологических бригад:
                [[${dataFormOilPad.drillingRig}]]</p>
            <p class="fst-italic lh-1" th:if="${engineeringSurveyReport}">Камеральные инженерные изыскания: Да</p>
            <p class="fst-italic lh-1" th:if="${mmg and fieldEngineeringSurvey}">Территория распространения многолетнемерзлых грунтов: Да</p>
            <p class="fst-italic lh-1" th:if="${!mmg and fieldEngineeringSurvey}">Территория распространения многолетнемерзлых грунтов: Нет</p>
            <p class="fst-italic lh-1" th:if="${engineeringSurveyReport}">
                [[${dataFormOilPad.complexityOfGeology.title}]] в месте выполнения ИИ</p>
            <p class="fst-italic lh-1" th:if="${!engineeringSurveyReport}">Камеральные инженерные изыскания: Нет</p>
            <p class="fst-italic lh-1">Человеческий фактор, непредвиденные обстоятельства, форс-мажор, какие-либо
                неопределенности в выполнении работ - [[${dataFormOilPad.humanFactor}]] %</p>
            <p class="fst-italic lh-1">Количество скважин для инженерной подготовки:
                [[${dataFormOilPad.backfillWell.well}]] - [[${dataFormOilPad.backfillWell.stage}]] этап</p>
            <p class="fst-italic lh-1" th:if="${dataFormOilPad.road.active}">Автомобильные дороги категории
                [[${dataFormOilPad.road.category}]] общей протяженностью [[${dataFormOilPad.road.length}]] км
                в количестве [[${dataFormOilPad.road.count}]] шт. - [[${dataFormOilPad.road.stage}]] этап</p>
            <p class="fst-italic lh-1" th:if="${dataFormOilPad.road.bridgeExist}">Дорожные мосты в количестве:
                [[${dataFormOilPad.road.bridgeRoadCount}]] шт.,
                общей протяженностью [[${dataFormOilPad.road.bridgeRoadLength}]] м - [[${dataFormOilPad.road.stage}]]
                этап</p>
            <p class="fst-italic lh-1" th:if="${dataFormOilPad.line.active}">ВЛ напряжением
                [[${dataFormOilPad.line.power.title}]] протяженностью [[${dataFormOilPad.line.length}]] км
                - [[${dataFormOilPad.line.stage}]] этап</p>
            <p class="fst-italic lh-1" th:if="${dataFormOilPad.backfillSites[0].active}">Площадка под МУПН площадью
                [[${dataFormOilPad.backfillSites[0].square}]] га - [[${dataFormOilPad.backfillSites[0].stage}]] этап</p>
            <p class="fst-italic lh-1" th:if="${dataFormOilPad.backfillSites[1].active}">Площадка под ВЭЦ площадью
                [[${dataFormOilPad.backfillSites[1].square}]] га - [[${dataFormOilPad.backfillSites[1].stage}]] этап</p>
            <p class="fst-italic lh-1" th:if="${dataFormOilPad.cableRack.active}">Кабельные эстакады общей
                протяженностью
                [[${dataFormOilPad.cableRack.length}]] м
                - [[${dataFormOilPad.cableRack.stage}]] этап</p>
            <p class="fst-italic lh-1" th:if="${dataFormOilPad.backfillSites[2].active}">Площадка под ВЖК площадью
                [[${dataFormOilPad.backfillSites[2].square}]] га - [[${dataFormOilPad.backfillSites[2].stage}]] этап</p>
            <p class="fst-italic lh-1" th:if="${dataFormOilPad.backfillSites[3].active}">Площадка под модульную
                подстанцию
                площадью [[${dataFormOilPad.backfillSites[3].square}]] га - [[${dataFormOilPad.backfillSites[3].stage}]]
                этап</p>
            <span class="fst-italic lh-1"
                  th:if="${dataFormOilPad.vvp.active and dataFormOilPad.vvp.helicopterModel != null and dataFormOilPad.vvp.helicopterModel != ''}">
                Временная вертолетная площадка для [[${dataFormOilPad.vvp.helicopterModel}]] в количестве [[${dataFormOilPad.vvp.count}]] шт.</span>
            <span class="fst-italic lh-1"
                  th:if="${dataFormOilPad.vvp.active and (dataFormOilPad.vvp.helicopterModel == '' or dataFormOilPad.vvp.helicopterModel == null)}">
                Временная вертолетная площадка площадью [[${dataFormOilPad.vvp.square}]] га в количестве [[${dataFormOilPad.vvp.count}]] шт.</span>
            <span class="fst-italic lh-1" th:if="${dataFormOilPad.vvp.hallExist}"> с залом ожидания</span>
            <span class="fst-italic lh-1"
                  th:if="${dataFormOilPad.vvp.active}"> - [[${dataFormOilPad.vvp.stage}]] этап</span><br><br>
            <hr class="my-4">
            <div th:insert="~{blocks/calendar-block.html :: calendar-content}"></div>
        </div>
    </div>
    <br>
    <div class="card text-center">
        <form class="card" id="calendarExcel" method="GET" th:action="@{/calendar_application/calendar/to_desktop}">
            <div class="card text-center">
                <input type="hidden" name="codeContract" th:value="${codeContract}"/>
                <button type="submit" class="btn btn-outline-secondary fw-bolder">Выгрузить календарный план в Excel
                </button>
            </div>
        </form>
        <form class="card" id="scheduleExcel" method="GET" th:action="@{/calendar_application/schedule/to_desktop}">
            <div class="card text-center">
                <input type="hidden" name="codeContract" th:value="${codeContract}"/>
                <button type="submit" class="btn btn-outline-secondary fw-bolder">Выгрузить график 1го уровня в Excel
                </button>
            </div>
        </form>
        <div class="card">
            <div class="card text-center">
                <a class="btn btn-outline-secondary fw-bolder " href="../calendar-application.html" th:href="@{/calendar_application}">
                    Вернуться на начальную страницу</a>
            </div>
        </div>
        <div class="card">
            <div class="card text-center">
                <a id="goToBackfillWell" class="btn btn-outline-secondary fw-bolder"
                   href="../input_page/backfill-well.html"
                   th:href="@{/calendar_application/oil_pad_object/backfill_well}">Перейти
                    на страницу ввода данных нового проекта</a>
            </div>
        </div>
    </div>
    <script>
        // Проверка, откуда пришел пользователь для формирования кнопок
        if (document.referrer && document.referrer.endsWith('/oil_pad_object/backfill_well') ||
            document.referrer && document.referrer.endsWith('/oil_pad_object/backfill_well/calendar') ||
            document.referrer && document.referrer.endsWith('/oil_pad_object/backfill_well/create')) {
            document.getElementById('goToBackfillWell').style.display = 'block';
        } else {
            document.getElementById('goToBackfillWell').style.display = 'none';
        }
    </script>
    <div th:insert="~{blocks/stage-calendar-script.html :: stage-calendar-content}"></div>
    <hr class="my-4">
</th:block>
</html>